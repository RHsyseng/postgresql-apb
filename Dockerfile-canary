FROM ansibleplaybookbundle/apb-base
# MAINTAINER {{ $MAINTAINER }}

LABEL "com.redhat.apb.spec"=\
"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyBTaGFyZWQgUGFyYW1ldGVycwojIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIwpfcDogJl9wCiAgLSBuYW1lOiBwb3N0Z3Jlc3FsX2RhdGFiYXNlCiAgICBkZWZh\
dWx0OiBhZG1pbgogICAgdHlwZTogc3RyaW5nCiAgICB0aXRsZTogUG9zdGdyZVNRTCBEYXRhYmFz\
ZSBOYW1lCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogcG9zdGdyZXNxbF9wYXNzd29yZAog\
ICAgdHlwZTogc3RyaW5nCiAgICBkZXNjcmlwdGlvbjogQSByYW5kb20gYWxwaGFudW1lcmljIHN0\
cmluZyBpZiBsZWZ0IGJsYW5rCiAgICB0aXRsZTogUG9zdGdyZVNRTCBQYXNzd29yZAogIC0gbmFt\
ZTogcG9zdGdyZXNxbF91c2VyCiAgICBkZWZhdWx0OiBhZG1pbgogICAgdGl0bGU6IFBvc3RncmVT\
UUwgVXNlcgogICAgdHlwZTogc3RyaW5nCiAgICBtYXhsZW5ndGg6IDYzCiAgICByZXF1aXJlZDog\
dHJ1ZQogIC0gbmFtZTogcG9zdGdyZXNxbF92ZXJzaW9uCiAgICBkZWZhdWx0OiA5LjUKICAgIGVu\
dW06IFsnOS41JywgJzkuNCddCiAgICB0eXBlOiBlbnVtCiAgICB0aXRsZTogUG9zdGdyZVNRTCBW\
ZXJzaW9uCiAgICByZXF1aXJlZDogdHJ1ZQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwp2ZXJzaW9u\
OiAxLjAKbmFtZTogcmhzY2wtcG9zdGdyZXNxbC1hcGIKZGVzY3JpcHRpb246IFNDTCBQb3N0Z3Jl\
U1FMIGFwYiBpbXBsZW1lbnRhdGlvbgpiaW5kYWJsZTogdHJ1ZQphc3luYzogb3B0aW9uYWwKbWV0\
YWRhdGE6CiAgZG9jdW1lbnRhdGlvblVybDogaHR0cHM6Ly93d3cucG9zdGdyZXNxbC5vcmcvZG9j\
cy8KICBsb25nRGVzY3JpcHRpb246IEFuIGFwYiB0aGF0IGRlcGxveXMgcG9zdGdyZXNxbCA5LjQg\
b3IgOS41LgogIGRlcGVuZGVuY2llczogWydyZWdpc3RyeS5hY2Nlc3MucmVkaGF0LmNvbS9yaHNj\
bC9wb3N0Z3Jlc3FsLTk1LXJoZWw3J10KICBkaXNwbGF5TmFtZTogUG9zdGdyZVNRTCAoQVBCKQog\
IGNvbnNvbGUub3BlbnNoaWZ0LmlvL2ljb25DbGFzczogaWNvbi1wb3N0Z3Jlc3FsCiAgcHJvdmlk\
ZXJEaXNwbGF5TmFtZTogIlJlZCBIYXQsIEluYy4iCnBsYW5zOgogIC0gbmFtZTogZGV2CiAgICBk\
ZXNjcmlwdGlvbjogQSBzaW5nbGUgREIgc2VydmVyIHdpdGggbm8gc3RvcmFnZQogICAgZnJlZTog\
dHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBEZXZlbG9wbWVudAogICAgICBs\
b25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBwcm92aWRlcyBhIHNpbmdsZSBub24tSEEgUG9zdGdy\
ZVNRTCBzZXJ2ZXIgd2l0aG91dCBwZXJzaXN0ZW50IHN0b3JhZ2UKICAgICAgY29zdDogJDAuMDAK\
ICAgIHBhcmFtZXRlcnM6ICpfcAogIC0gbmFtZTogcHJvZAogICAgZGVzY3JpcHRpb246IEEgc2lu\
Z2xlIERCIHNlcnZlciB3aXRoIHBlcnNpc3RlbnQgc3RvcmFnZQogICAgZnJlZTogdHJ1ZQogICAg\
bWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBQcm9kdWN0aW9uCiAgICAgIGxvbmdEZXNjcmlw\
dGlvbjogVGhpcyBwbGFuIHByb3ZpZGVzIGEgc2luZ2xlIG5vbi1IQSBQb3N0Z3JlU1FMIHNlcnZl\
ciB3aXRoIHBlcnNpc3RlbnQgc3RvcmFnZQogICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1ldGVy\
czogKl9wCg=="


COPY roles /opt/ansible/roles
COPY playbooks/* /opt/apb/actions/
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
