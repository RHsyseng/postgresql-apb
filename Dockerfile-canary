FROM ansibleplaybookbundle/apb-base
# MAINTAINER {{ $MAINTAINER }}

LABEL "com.redhat.apb.spec"=\
"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyBTaGFyZWQgUGFyYW1ldGVycwojIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIwpfcDogJl9wCiAgLSBuYW1lOiBwb3N0Z3Jlc3FsX2RhdGFiYXNlCiAgICBkZWZh\
dWx0OiBhZG1pbgogICAgdHlwZTogc3RyaW5nCiAgICB0aXRsZTogUG9zdGdyZVNRTCBEYXRhYmFz\
ZSBOYW1lCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogcG9zdGdyZXNxbF9wYXNzd29yZAog\
ICAgdHlwZTogc3RyaW5nCiAgICBkZXNjcmlwdGlvbjogQSByYW5kb20gYWxwaGFudW1lcmljIHN0\
cmluZyBpZiBsZWZ0IGJsYW5rCiAgICB0aXRsZTogUG9zdGdyZVNRTCBQYXNzd29yZAogIC0gbmFt\
ZTogcG9zdGdyZXNxbF91c2VyCiAgICBkZWZhdWx0OiBhZG1pbgogICAgdGl0bGU6IFBvc3RncmVT\
UUwgVXNlcgogICAgdHlwZTogc3RyaW5nCiAgICBtYXhsZW5ndGg6IDYzCiAgICByZXF1aXJlZDog\
dHJ1ZQogIC0gbmFtZTogcG9zdGdyZXNxbF92ZXJzaW9uCiAgICBkZWZhdWx0OiA5LjUKICAgIGVu\
dW06IFsnOS41JywgJzkuNCddCiAgICB0eXBlOiBlbnVtCiAgICB0aXRsZTogUG9zdGdyZVNRTCBW\
ZXJzaW9uCiAgICByZXF1aXJlZDogdHJ1ZQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwp2ZXJzaW9u\
OiAxLjAKbmFtZTogcmhzY2wtcG9zdGdyZXNxbC1hcGIKaW1hZ2U6IGFuc2libGVwbGF5Ym9va2J1\
bmRsZS9yaHNjbC1wb3N0Z3Jlc3FsLWFwYgpkZXNjcmlwdGlvbjogU0NMIFBvc3RncmVTUUwgYXBi\
IGltcGxlbWVudGF0aW9uCmJpbmRhYmxlOiB0cnVlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToK\
ICBkb2N1bWVudGF0aW9uVXJsOiBodHRwczovL3d3dy5wb3N0Z3Jlc3FsLm9yZy9kb2NzLwogIGxv\
bmdEZXNjcmlwdGlvbjogQW4gYXBiIHRoYXQgZGVwbG95cyBwb3N0Z3Jlc3FsIDkuNCBvciA5LjUu\
CiAgZGVwZW5kZW5jaWVzOiBbJ3JlZ2lzdHJ5LmFjY2Vzcy5yZWRoYXQuY29tL3Joc2NsL3Bvc3Rn\
cmVzcWwtOTUtcmhlbDcnXQogIGRpc3BsYXlOYW1lOiBQb3N0Z3JlU1FMIChBUEIpCiAgY29uc29s\
ZS5vcGVuc2hpZnQuaW8vaWNvbkNsYXNzOiBpY29uLXBvc3RncmVzcWwKICBwcm92aWRlckRpc3Bs\
YXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKcGxhbnM6CiAgLSBuYW1lOiBkZXYKICAgIGRlc2NyaXB0\
aW9uOiBBIHNpbmdsZSBEQiBzZXJ2ZXIgd2l0aCBubyBzdG9yYWdlCiAgICBmcmVlOiB0cnVlCiAg\
ICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IERldmVsb3BtZW50CiAgICAgIGxvbmdEZXNj\
cmlwdGlvbjogVGhpcyBwbGFuIHByb3ZpZGVzIGEgc2luZ2xlIG5vbi1IQSBQb3N0Z3JlU1FMIHNl\
cnZlciB3aXRob3V0IHBlcnNpc3RlbnQgc3RvcmFnZQogICAgICBjb3N0OiAkMC4wMAogICAgcGFy\
YW1ldGVyczogKl9wCiAgLSBuYW1lOiBwcm9kCiAgICBkZXNjcmlwdGlvbjogQSBzaW5nbGUgREIg\
c2VydmVyIHdpdGggcGVyc2lzdGVudCBzdG9yYWdlCiAgICBmcmVlOiB0cnVlCiAgICBtZXRhZGF0\
YToKICAgICAgZGlzcGxheU5hbWU6IFByb2R1Y3Rpb24KICAgICAgbG9uZ0Rlc2NyaXB0aW9uOiBU\
aGlzIHBsYW4gcHJvdmlkZXMgYSBzaW5nbGUgbm9uLUhBIFBvc3RncmVTUUwgc2VydmVyIHdpdGgg\
cGVyc2lzdGVudCBzdG9yYWdlCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOiAqX3AK"


COPY roles /opt/ansible/roles
COPY playbooks/* /opt/apb/actions/
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
